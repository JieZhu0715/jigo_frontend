(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{198:function(e,t,a){e.exports=a(594)},207:function(e,t,a){},578:function(e,t,a){},593:function(e,t){},594:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),s=a.n(l),i=a(22),o=(a(207),a(13)),c=a(14),u=a(16),m=a(15),d=a(17),p=a(599),E=a(600),f=a(598),h=(a(143),a(41)),b=(a(595),a(149)),g=a(596),y=a(19),v=a(39),O=a.n(v),S=function(e){return"https://jigo-backend.herokuapp.com/"+e},_=function(e){return{type:e}},j=function(e,t){return{type:e,payload:Object(y.a)({},t)}},R=function(e,t){return{type:e,payload:{error:t}}},C=S("items"),k=b.a.Meta,I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).cardOnClick=function(e){a.props.history.push("/item/"+e)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.listItems()}},{key:"render",value:function(){var e=this;return this.props.loading?r.a.createElement("div",null,"Loading items"):this.props.error?r.a.createElement("div",null,"Loading items failed : ",this.props.error):this.props.items?r.a.createElement(h.a,{grid:{gutter:50,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:this.props.items,renderItem:function(t){return r.a.createElement(h.a.Item,null,r.a.createElement(b.a,{key:t._id,hoverable:!0,onClick:function(){return e.cardOnClick(t._id)},cover:r.a.createElement("img",{alt:"example",src:t.image_url})},r.a.createElement(k,{title:t.name,description:t.description})))}}):r.a.createElement("div",null,"No items found")}}]),t}(n.Component),T={listItems:function(){return function(e){e(_("LIST_ITEMS_STARTED")),O.a.get("".concat(C,"/all")).then(function(t){e(j("LIST_ITEMS_SUCCESS",t.data))}).catch(function(t){e(R("LIST_ITEMS_FAILURE",t.message))})}}},w=Object(i.b)(function(e){return{items:e.items.items,message:e.items.message,loading:e.items.loading,error:e.items.error}},T)(Object(g.a)(I)),U=(a(71),a(9)),D=(a(101),a(35)),A=(a(182),a(49)),F=(a(173),a(47)),N=(a(174),a(27)),M=(a(102),a(64)),L=(a(77),a(44)),x=(a(175),a(116)),G=(a(60),a(24)),q=(a(58),a(18)),P=(a(78),a(23)),B=a(597),z=S("users"),W=function(e,t){return function(a){a(_("LOGIN_STARTED")),O.a.post("".concat(z,"/login"),e).then(function(e){a(j("LOGIN_SUCCESS",e.data)),t()}).catch(function(e){a(R("LOGIST_ITEMS_FAILURE",e.message))})}},V=function(){return{type:"LOGOUT"}},H=function(e){return function(t){t({type:"CURRENT_USER",payload:{user:window.sessionStorage.userInfo?JSON.parse(window.sessionStorage.userInfo):void 0}}),e&&e()}},J=P.a.Item,K=D.a.Header,Q=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,l=e.form,s=e.loading,i=l.getFieldDecorator;return r.a.createElement(L.a,{visible:t,title:"Login",footer:[r.a.createElement(q.a,{key:"back",onClick:a},"\u53d6\u6d88"),r.a.createElement(q.a,{key:"submit",type:"primary",loading:s,onClick:n}," \u767b\u9646 ")]},r.a.createElement(P.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(J,null,i("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6709\u6548\u90ae\u7bb1!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u90ae\u7bb1"}))),r.a.createElement(J,null,i("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(J,null,i("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(x.a,{className:"login-form-register-remember"},"Remember me")),r.a.createElement("a",{className:"login-form-forgot"},"Forgot password"))))}}]),t}(n.Component),Y=P.a.create()(Q),$=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleSubmit=function(e){var t=a.formRef.props.form;t.validateFields(function(e,n){e||(console.log("Received values of form: ",n),a.setState({loading:!0}),console.log(a.props.login),a.props.login(n,function(){window.sessionStorage.userInfo=JSON.stringify(a.props.user),t.resetFields(),a.setState({visible:!1})}))})},a.saveFormRef=function(e){a.formRef=e},a.state={visible:!1,loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.currentUser()}},{key:"render",value:function(){return r.a.createElement(K,{className:"header"},r.a.createElement("div",{className:"logo"}),this.props.user&&r.a.createElement("div",{style:{float:"right"}},r.a.createElement(M.a,{style:{backgroundColor:this.props.color,verticalAlign:"middle"},size:"large"},this.props.user.name)),!this.props.user&&r.a.createElement("div",null,r.a.createElement(F.a,{type:"flex",justify:"end"},r.a.createElement(N.a,{span:2},r.a.createElement(q.a,{onClick:this.showModal}," \u767b\u9646 ")),r.a.createElement(N.a,{span:2},r.a.createElement(q.a,{type:"primary"},r.a.createElement(B.a,{to:"/register"}," \u6ce8\u518c ")))),r.a.createElement(Y,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,loading:this.state.loading,onCancel:this.handleCancel,onCreate:this.handleSubmit})))}}]),t}(n.Component),X=Object(i.b)(function(e){var t=e.users.user,a=["#f56a00","#7265e6","#ffbf00","#00a2ae"];return{user:t,color:t?a[t._id%4]:a[0],loading:e.users.loading,error:e.users.loading}},{login:W,currentUser:H})($),Z=A.a.SubMenu,ee=D.a.Content,te=D.a.Sider,ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onMenuClick=function(e){a.props.history.push("/"+e.key)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(X,null),r.a.createElement(D.a,null,r.a.createElement(te,{breakpoint:"lg",collapsedWidth:"0",width:200,style:{background:"#fff"}},r.a.createElement(A.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["items"],style:{height:"100%",borderRight:0},onClick:this.onMenuClick},r.a.createElement(Z,{key:"items",title:r.a.createElement("span",null,r.a.createElement(U.a,{type:"user"}),"Buy")},r.a.createElement(A.a.Item,{key:"items"},"\u6d4f\u89c8\u5546\u54c1"),r.a.createElement(A.a.Item,{key:"request_item"},"\u6dfb\u52a0\u5176\u4ed6")),r.a.createElement(Z,{key:"manage",title:r.a.createElement("span",null,r.a.createElement(U.a,{type:"user"}),"\u7ba1\u7406")},r.a.createElement(A.a.Item,{key:"profile"},r.a.createElement(U.a,{type:"user"}),"\u7528\u6237\u8d44\u6599"),r.a.createElement(A.a.Item,{key:"orders"},"\u6211\u7684\u8ba2\u5355")))),r.a.createElement(D.a,{style:{padding:"0 24px 24px"}},r.a.createElement(ee,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},this.props.children))))}}]),t}(n.Component),ne=Object(g.a)(ae),re=(a(89),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(){window.sessionStorage.userInfo=null,a.props.logout(),a.props.history.push("/")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log(this.props.user);var e=this.props.user;return r.a.createElement("div",{className:"App"},e&&r.a.createElement("div",null,r.a.createElement(h.a,{size:"large",header:r.a.createElement("div",null,"Your profile"),bordered:!0},r.a.createElement(h.a.Item,null,"\u7528\u6237\u540d: ",e.name),r.a.createElement(h.a.Item,null,"\u90ae\u7bb1: ",e.email),r.a.createElement(h.a.Item,null,"\u7b80\u4ecb: ",e.introduce),r.a.createElement(h.a.Item,null,r.a.createElement(q.a,{type:"Danger",onClick:this.onLogoutClick}," \u6ce8\u9500\u7528\u6237 ")))),!e&&r.a.createElement("div",null,"\u767b\u9646\u4ee5\u540e\u67e5\u770b\u7528\u6237\u8d44\u6599"))}}]),t}(n.Component)),le=Object(i.b)(function(e){return{user:e.users.user}},{logout:V})(Object(g.a)(re)),se=P.a.Item,ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){a.setState({visible:!1}),a.props.history.push("/")},a.handleCancel=function(e){a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){console.log(t),e||a.props.register(t,function(){a.handleReset(),a.showModal()})})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("\u8bf7\u786e\u4fdd\u8f93\u5165\u76f8\u540c\u5bc6\u7801!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&r.validateFields(["confirm"],{force:!0}),n()},a.state={visible:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"App",id:"login-page"},r.a.createElement("header",{className:"App-header"},r.a.createElement(P.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(se,null,e("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(se,null,e("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u7528\u4e8e\u767b\u9646!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u767b\u5f55\u90ae\u7bb1"}))),r.a.createElement(se,null,e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"},{validator:this.validateToNextPassword}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(se,null,e("confirm_password",{rules:[{required:!0,message:"\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801"},{validator:this.compareToFirstPassword}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801"}))),r.a.createElement(se,null,r.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u6ce8\u518c"))),r.a.createElement(L.a,{title:"\u6ce8\u518c\u6210\u529f",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("p",null," \u60a8\u5df2\u7ecf\u6210\u529f\u6ce8\u518c,\u8bf7\u8fd4\u56de\u767b. "))))}}]),t}(n.Component),oe=P.a.create()(ie),ce=Object(i.b)(function(e){return{user:e.users.user,loading:e.users.loading,error:e.users.loading}},{register:function(e,t,a){return function(n){n(_("REGISTER_STARTED")),O.a.post("".concat(z,"/register"),e).then(function(e){n(j("REGISTER_SUCCESS",e.data)),t&&t()}).catch(function(e){n(R("REGISTER_FAILURE",e.message)),a&&a()})}}})(oe),ue=(a(178),a(115)),me=a(66),de=a.n(me),pe=a(113),Ee=a.n(pe),fe=(a(578),function(e){function t(e){return Object(o.a)(this,t),console.log(e),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user_id;this.props.findUser(e)}},{key:"render",value:function(){var e=this.props.itemCreatedBy;return e?(console.log(this.props.itemCreatedBy),r.a.createElement("div",null,r.a.createElement(M.a,{className:"auth-logo",size:"small",icon:"user"}),e.name," - ",e.introduce)):r.a.createElement("div",null)}}]),t}(n.Component)),he=Object(i.b)(function(e){return{itemCreatedBy:e.users.itemCreatedBy}},{findUser:function(e,t){return function(a){a(_("FIND_USER_STARTED")),O.a.get("".concat(z,"/findUser?_id=").concat(e)).then(function(e){a(j("FIND_USER_SUCCESS",e.data)),t&&t()}).catch(function(e){a(R("FIND_USER_FAILURE",e.message))})}}})(fe),be=S("orders"),ge=function(e,t,a){return function(n){n(_("GET_USER_ORDERS_STARTED")),O.a.get("".concat(be,"/findUserOrders?user_id=").concat(e)).then(function(e){console.log(e.data.data),n(j("GET_USER_ORDERS_SUCCESS",e.data)),t&&t()}).catch(function(e){n(R("GET_USER_ORDERS_FAILURE",e.message)),a&&a()})}},ye=P.a.Item,ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(e){a.setState({visible:!0,message:e})},a.handleOk=function(e){a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.current_user,r=t.display_item;a.props.form.validateFields(function(e,t){if(!e){if(a.props.current_user)t.user_id=n._id;else if(t.user_id="5af584ebb62aae2fa8e406a2",!t.email&&!t.wechat)return void a.showModal("\u60a8\u8fd8\u6ca1\u6709\u767b\u9646! \u6e38\u5ba2\u4e0b\u5355\u8bf7\u8f93\u5165\u90ae\u7bb1\u6216\u8005\u5fae\u4fe1.");t.item_id=r._id,a.props.order(t,function(){a.handleReset(),a.showModal("\u5df2\u7ecf\u6210\u529f\u4e0b\u5355! \u5de5\u4f5c\u4eba\u5458\u4f1a\u8054\u7cfb\u60a8.")})}})},a.state={visible:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){de.a.setOptions({renderer:new de.a.Renderer,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1,highlight:function(e){return Ee.a.highlightAuto(e).value}});var e=this.props.match.params._id;this.props.getItem(e),this.props.currentUser()}},{key:"render",value:function(){var e=this.props.display_item,t=this.props.form.getFieldDecorator;return e?r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title",style:{margin:"20px 0 0",textAlign:"center",fontSize:"34px",fontWeight:"bold"}}," ",e.name," ")),r.a.createElement(he,{user_id:e.created_by}),r.a.createElement("div",{id:"content",className:"article-detail",dangerouslySetInnerHTML:{__html:e.content?de()(e.content):null}}),r.a.createElement(P.a,{onSubmit:this.handleSubmit,className:"order-form"},r.a.createElement(ye,null,t("email",{rules:[{message:"Please input your Email!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u90ae\u7bb1(\u53ef\u9009\u586b)"}))),r.a.createElement(ye,null,t("wechat",{rules:[{message:"Please input your Wechat!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5fae\u4fe1(\u53ef\u9009\u586b)"}))),r.a.createElement(ye,null,t("quantity",{rules:[{required:!0,message:"Select quantity"}]})(r.a.createElement(ue.a,{min:1,placeholder:"Quantity"}))),r.a.createElement(ye,null,r.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u4e0b\u5355"))),r.a.createElement(L.a,{title:"\u4e0b\u5355\u5b8c\u6210",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("p",null," ",this.state.message," "))):r.a.createElement("div",null,"Loading items")}}]),t}(n.Component),Oe=P.a.create()(ve),Se=Object(i.b)(function(e){return{current_user:e.users.user,display_item:e.items.displayItem,message:e.items.message,loading:e.items.loading,error:e.items.error}},{getItem:function(e){return function(t){t(_("GET_ITEM_STARTED")),O.a.get("".concat(C,"/find?_id=").concat(e)).then(function(e){t(j("GET_ITEM_SUCCESS",e.data))}).catch(function(e){t(R("GET_ITEM_FAILURE",e.message))})}},order:function(e,t,a){return function(n){n(_("ORDER_STARTED")),O.a.post("".concat(be,"/add"),e).then(function(e){n(j("ORDER_SUCCESS",e.data)),t&&t()}).catch(function(e){n(R("ORDER_FAILURE",e.message)),a&&a()})}},currentUser:H})(Oe),_e=S("requests"),je=P.a.Item,Re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.props.current_user;t?a.props.form.validateFields(function(e,n){e||(n.user_id=t._id,a.props.request(n,function(){a.showModal("\u6210\u529f\u8bf7\u6c42\u4e86\u4e00\u4e2a\u65b0\u5546\u54c1,\u6211\u4eec\u4f1a\u6dfb\u52a0\u5b83\u5230\u7cfb\u7edf."),a.handleReset()}))}):a.showModal("\u60a8\u8fd8\u6ca1\u6709\u767b\u9646, \u8bf7\u767b\u9646\u53d1\u9001\u8bf7\u6c42.")},a.showModal=function(e){a.setState({visible:!0,message:e})},a.handleOk=function(e){a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.state={visible:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"App"},r.a.createElement(P.a,{onSubmit:this.handleSubmit},r.a.createElement(je,null,e("description",{rules:[{required:!0,message:"Please input some description!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5546\u54c1\u7b80\u4ecb"}))),r.a.createElement(je,null,e("reference",{rules:[{message:"Please input your reference"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5b98\u7f51\u6216\u8005\u5176\u4ed6\u5728\u552e\u7f51\u7ad9(\u53ef\u9009\u586b)"}))),r.a.createElement(je,null,e("quantity",{rules:[{message:"Select quantity"}]})(r.a.createElement("div",null," ",r.a.createElement(ue.a,{style:{width:"100%"},placeholder:"\u60a8\u5c06\u8d2d\u4e70\u51e0\u4ef6\u8be5\u5546\u54c1(\u53ef\u9009\u586b)"})," "))),r.a.createElement(je,null,r.a.createElement(q.a,{type:"primary",htmlType:"submit"},"\u6dfb\u52a0"))),r.a.createElement(L.a,{title:"\u6dfb\u52a0\u8bf7\u6c42: ",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("p",null," ",this.state.message," ")))}}]),t}(n.Component),Ce=P.a.create()(Re),ke=Object(i.b)(function(e){return{current_user:e.users.user}},{request:function(e,t,a){return function(n){n(_("REQUEST_STARTED")),O.a.post("".concat(_e,"/add"),e).then(function(e){n(j("REQUEST_SUCCESS",e.data)),t&&t()}).catch(function(e){n(R("REQUEST_FAILURE",e.message)),a&&a()})}}})(Ce),Ie=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserOrders(this.props.user_id)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,{itemLayout:"horizontal",header:r.a.createElement("div",null,"\u60a8\u7684\u8ba2\u5355"),size:"large",dataSource:this.props.user_orders,renderItem:function(e){return r.a.createElement(h.a.Item,null,r.a.createElement(h.a.Item.Meta,{avatar:r.a.createElement(M.a,{src:e.item_id.image_url}),title:e.item_id.name}),r.a.createElement("div",null,r.a.createElement("p",null," \u5546\u54c1\u540d\u79f0: ",e.item_id.name),r.a.createElement("p",null," \u4e0b\u5355\u65e5\u671f: ",e.createdAt),r.a.createElement("p",null," \u6570\u91cf: ",e.quantity),r.a.createElement("p",null," \u5f53\u524d\u72b6\u6001: ",e.status)))}}))}}]),t}(n.Component),Te=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.props.current_user&&r.a.createElement(Ue,{user_id:this.props.current_user._id}),!this.props.current_user&&r.a.createElement("div",null," \u767b\u9646\u4ee5\u540e\u67e5\u770b\u7528\u6237\u8ba2\u5355 "))}}]),t}(n.Component),we=function(e){return{current_user:e.users.user,user_orders:e.orders.user_orders}},Ue=Object(i.b)(we,{getUserOrders:ge})(Ie),De=Object(i.b)(we,{currentUser:H,getUserOrders:ge})(Object(g.a)(Te)),Ae=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.props.user&&r.a.createElement("div",null),!this.props.user&&r.a.createElement("header",{className:"App-header"},"You must login to review user profile"))}}]),t}(n.Component),Fe=Object(i.b)(function(e){return{user:e.users.user}},{logout:V})(Object(g.a)(Ae)),Ne=P.a.Item,Me=D.a.Header,Le=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,l=e.form,s=e.loading,i=l.getFieldDecorator;return r.a.createElement(L.a,{visible:t,title:"Login",footer:[r.a.createElement(q.a,{key:"back",onClick:a},"\u53d6\u6d88"),r.a.createElement(q.a,{key:"submit",type:"primary",loading:s,onClick:n}," \u767b\u9646 ")]},r.a.createElement(P.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(Ne,null,i("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6709\u6548\u90ae\u7bb1!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u90ae\u7bb1"}))),r.a.createElement(Ne,null,i("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(Ne,null,i("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(x.a,{className:"login-form-register-remember"},"Remember me")),r.a.createElement("a",{className:"login-form-forgot"},"Forgot password"))))}}]),t}(n.Component),xe=P.a.create()(Le),Ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleSubmit=function(e){var t=a.formRef.props.form;t.validateFields(function(e,n){e||(console.log("Received values of form: ",n),a.setState({loading:!0}),console.log(a.props.login),a.props.login(n,function(){window.sessionStorage.userInfo=JSON.stringify(a.props.user),t.resetFields(),a.setState({visible:!1})}))})},a.saveFormRef=function(e){a.formRef=e},a.state={visible:!1,loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.currentUser()}},{key:"render",value:function(){return r.a.createElement(Me,{className:"header"},r.a.createElement("div",{className:"logo"}),this.props.user&&r.a.createElement("div",{style:{float:"right"}},r.a.createElement(q.a,null," ",r.a.createElement(B.a,{to:"/"}," Go to user site ")," "),r.a.createElement(M.a,{style:{backgroundColor:this.props.color,verticalAlign:"middle"},size:"large"},this.props.user.name)),!this.props.user&&r.a.createElement("div",null,r.a.createElement(F.a,{type:"flex",justify:"end"},r.a.createElement(N.a,{span:2},r.a.createElement(q.a,{onClick:this.showModal}," \u767b\u9646 ")),r.a.createElement(N.a,{span:2},r.a.createElement(q.a,{type:"primary"},r.a.createElement(B.a,{to:"/login"}," \u6ce8\u518c ")))),r.a.createElement(xe,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,loading:this.state.loading,onCancel:this.handleCancel,onCreate:this.handleSubmit})))}}]),t}(n.Component),qe=Object(i.b)(function(e){var t=e.users.user,a=["#f56a00","#7265e6","#ffbf00","#00a2ae"];return{user:t,color:t?a[t._id%4]:a[0],loading:e.users.loading,error:e.users.loading}},{login:W,currentUser:H})(Ge),Pe=A.a.SubMenu,Be=D.a.Content,ze=D.a.Sider,We=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onMenuClick=function(e){a.props.history.push("/broker_site/"+e.key)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement(qe,null),r.a.createElement(D.a,null,r.a.createElement(ze,{breakpoint:"lg",collapsedWidth:"0",width:200,style:{background:"#fff"}},r.a.createElement(A.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["broker"],style:{height:"100%",borderRight:0},onClick:this.onMenuClick},r.a.createElement(Pe,{key:"broker",title:r.a.createElement("span",null,r.a.createElement(U.a,{type:"laptop"}),"Pick up requests")},r.a.createElement(A.a.Item,{key:"item_edit"},"Edit Item")))),r.a.createElement(D.a,{style:{padding:"0 24px 24px"}},r.a.createElement(Be,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},this.props.children))))}}]),t}(n.Component),Ve=Object(g.a)(We),He=a(194),Je=a.n(He),Ke=P.a.Item,Qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getSmdeValue=function(){return a.state.smde.value()},a.setSmdeValue=function(e){a.state.smde.value(e)},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){t.content=a.getSmdeValue(),t.created_by=a.props.user._id,console.log(t),e||a.props.addItem(t,function(){a.handleReset(),a.setSmdeValue(""),a.showModal()})})},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("editor")&&this.setState({smde:new Je.a({element:document.getElementById("editor").childElementCount,autofocus:!0,autosave:!0,previewRender:function(e){return de()(e,{renderer:new de.a.Renderer,gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!0,smartLists:!0,smartypants:!0,highlight:function(e){return Ee.a.highlightAuto(e).value}})}})}),this.props.currentUser()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:16}}},a=this.props.user;return a&&1===a.user_type?r.a.createElement("div",null,r.a.createElement(P.a,{onSubmit:this.handleSubmit},r.a.createElement(Ke,Object.assign({},t,{label:"Name"}),e("name",{rules:[{required:!0,message:"Please input item name!"}]})(r.a.createElement(G.a,null))),r.a.createElement(Ke,Object.assign({},t,{label:"Description"}),e("description")(r.a.createElement(G.a,null))),r.a.createElement(Ke,Object.assign({},t,{label:"Cover Image"}),e("image_url",{rules:[{required:!0,message:"Please input item image url!"}]})(r.a.createElement(G.a,null))),r.a.createElement(Ke,Object.assign({},t,{label:"Price"}),e("price",{rules:[{required:!0,message:"Please input item price!"}]})(r.a.createElement(G.a,null))),r.a.createElement(Ke,Object.assign({},t,{label:"Content"}),r.a.createElement("textarea",{id:"editor",style:{marginBottom:20,width:800},size:"large",rows:6})),r.a.createElement(Ke,null,r.a.createElement(q.a,{type:"primary",htmlType:"submit"},"Save"))),r.a.createElement(L.a,{title:"Basic Modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("p",null,"Add new item successfully"))):r.a.createElement("div",null,"You need to be an admin to access this page")}}]),t}(n.Component),Ye=P.a.create()(Qe),$e=Object(i.b)(function(e){return{user:e.users.user}},{addItem:function(e,t){return function(a){a(_("ADD_NEW_ITEM_STARTED")),O.a.post("".concat(C,"/add"),e).then(function(e){a(j("ADD_NEW_ITEM_SUCCESS",e.data)),t()}).catch(function(e){a(R("ADD_NEW_ITEM_FAILURE",e.message))})}},currentUser:H})(Ye),Xe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(E.a,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(ne,null,r.a.createElement(w,null))}}),r.a.createElement(f.a,{path:"/register",component:ce}),r.a.createElement(f.a,{path:"/items",render:function(e){return r.a.createElement(ne,null,r.a.createElement(w,null))}}),r.a.createElement(f.a,{path:"/request_item",render:function(e){return r.a.createElement(ne,null,r.a.createElement(ke,null))}}),r.a.createElement(f.a,{path:"/profile",render:function(e){return r.a.createElement(ne,null,r.a.createElement(le,null))}}),r.a.createElement(f.a,{path:"/item/:_id",render:function(e){return r.a.createElement(ne,null,r.a.createElement(Se,e))}}),r.a.createElement(f.a,{path:"/orders",render:function(e){return r.a.createElement(ne,null,r.a.createElement(De,null))}}),r.a.createElement(f.a,{path:"/requests",render:function(e){return r.a.createElement(ne,null,r.a.createElement(Fe,null))}}),r.a.createElement(f.a,{path:"/broker_site/item_edit",render:function(e){return r.a.createElement(Ve,null,r.a.createElement($e,e))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=a(83),et=a(195),tt=a(196),at=Object(Ze.c)({default:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&arguments[1];return e},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_ITEMS_STARTED":return Object(y.a)({},e,{loading:!0});case"LIST_ITEMS_SUCCESS":return Object(y.a)({},e,{loading:!1,items:t.payload.data,message:t.payload.message});case"LIST_ITEMS_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});case"GET_ITEM_STARTED":return Object(y.a)({},e,{loading:!0});case"GET_ITEM_SUCCESS":return Object(y.a)({},e,{loading:!1,displayItem:t.payload.data,message:t.payload.message});case"GET_ITEM_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_STARTED":return Object(y.a)({},e,{loading:!0});case"LOGIN_SUCCESS":var a=t.payload.data,n={name:a.name,avatar:a.avatar,email:a.email,_id:a._id,introduce:a.introduce,user_type:a.user_type};return Object(y.a)({},e,{loading:!1,user:n,error:void 0});case"LOGIST_ITEMS_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});case"REGISTER_SUCCESS":return Object(y.a)({},e,{register_succes:!0,error:void 0});case"REGISTER_FAILURE":return Object(y.a)({},e,{register_succes:!1,error:t.payload.error});case"FIND_USER_SUCCESS":return Object(y.a)({},e,{loading:!1,itemCreatedBy:t.payload.data,error:void 0});case"FIND_USER_FAILURE":return Object(y.a)({},e,{loading:!1,itemCreatedBy:"anonymous",error:t.payload.error});case"LOGOUT":return Object(y.a)({},e,{user:void 0});case"CURRENT_USER":return Object(y.a)({},e,{user:t.payload.user});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_STARTED":return Object(y.a)({},e,{loading:!0});case"ORDER_SUCCESS":return Object(y.a)({},e,{loading:!1,order:t.payload.data,message:t.payload.message});case"ORDER_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});case"GET_USER_ORDERS_STARTED":return Object(y.a)({},e,{loading:!0});case"GET_USER_ORDERS_SUCCESS":return Object(y.a)({},e,{loading:!1,user_orders:t.payload.data,message:t.payload.message});case"GET_USER_ORDERS_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});default:return e}}}),nt=Object(tt.createLogger)(),rt=Object(Ze.d)(at,Object(Ze.a)(et.a,nt));s.a.render(r.a.createElement(i.a,{store:rt},r.a.createElement(Xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,a){}},[[198,2,1]]]);
//# sourceMappingURL=main.2728dbf0.chunk.js.map