(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,a){e.exports=a(594)},206:function(e,t,a){},578:function(e,t,a){},593:function(e,t){},594:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(10),s=a.n(l),i=a(22),o=(a(206),a(13)),c=a(14),u=a(16),m=a(15),d=a(17),p=a(599),E=a(600),f=a(598),h=(a(142),a(41)),g=(a(595),a(148)),b=a(596),y=a(19),v=a(39),O=a.n(v),S=function(e){return"https://jigo-backend.herokuapp.com/"+e},_=function(e){return{type:e}},j=function(e,t){return{type:e,payload:Object(y.a)({},t)}},R=function(e,t){return{type:e,payload:{error:t}}},C=S("items"),k=g.a.Meta,I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).cardOnClick=function(e){a.props.history.push("/item/"+e)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.listItems()}},{key:"render",value:function(){var e=this;return this.props.loading?n.a.createElement("div",null,"Loading items"):this.props.error?n.a.createElement("div",null,"Loading items failed : ",this.props.error):this.props.items?n.a.createElement(h.a,{grid:{gutter:50,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:this.props.items,renderItem:function(t){return n.a.createElement(h.a.Item,null,n.a.createElement(g.a,{key:t._id,hoverable:!0,onClick:function(){return e.cardOnClick(t._id)},cover:n.a.createElement("img",{alt:"example",src:t.image_url})},n.a.createElement(k,{title:t.name,description:t.description})))}}):n.a.createElement("div",null,"No items found")}}]),t}(r.Component),w={listItems:function(){return function(e){e(_("LIST_ITEMS_STARTED")),O.a.get("".concat(C,"/all")).then(function(t){e(j("LIST_ITEMS_SUCCESS",t.data))}).catch(function(t){e(R("LIST_ITEMS_FAILURE",t.message))})}}},T=Object(i.b)(function(e){return{items:e.items.items,message:e.items.message,loading:e.items.loading,error:e.items.error}},w)(Object(b.a)(I)),U=(a(71),a(9)),D=(a(101),a(35)),A=(a(180),a(49)),N=(a(172),a(47)),F=(a(173),a(27)),M=(a(102),a(64)),L=(a(77),a(44)),x=(a(174),a(115)),P=(a(60),a(24)),q=(a(58),a(18)),G=(a(78),a(23)),B=a(597),W=S("users"),z=function(e,t){return function(a){a(_("LOGIN_STARTED")),O.a.post("".concat(W,"/login"),e).then(function(e){a(j("LOGIN_SUCCESS",e.data)),t()}).catch(function(e){a(R("LOGIST_ITEMS_FAILURE",e.message))})}},Y=function(){return{type:"LOGOUT"}},V=function(e){return function(t){t({type:"CURRENT_USER",payload:{user:window.sessionStorage.userInfo?JSON.parse(window.sessionStorage.userInfo):void 0}}),e&&e()}},H=G.a.Item,J=D.a.Header,Q=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=e.onCreate,l=e.form,s=e.loading,i=l.getFieldDecorator;return n.a.createElement(L.a,{visible:t,title:"Login",footer:[n.a.createElement(q.a,{key:"back",onClick:a},"Cancel"),n.a.createElement(q.a,{key:"submit",type:"primary",loading:s,onClick:r}," Submit ")]},n.a.createElement(G.a,{onSubmit:this.handleSubmit,className:"login-form"},n.a.createElement(H,null,i("email",{rules:[{required:!0,message:"Please input your Email!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),n.a.createElement(H,null,i("password",{rules:[{required:!0,message:"Please input your Password!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),n.a.createElement(H,null,i("remember",{valuePropName:"checked",initialValue:!0})(n.a.createElement(x.a,{className:"login-form-register-remember"},"Remember me")),n.a.createElement("a",{className:"login-form-forgot"},"Forgot password"))))}}]),t}(r.Component),K=G.a.create()(Q),$=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleSubmit=function(e){var t=a.formRef.props.form;t.validateFields(function(e,r){e||(console.log("Received values of form: ",r),a.setState({loading:!0}),console.log(a.props.login),a.props.login(r,function(){window.sessionStorage.userInfo=JSON.stringify(a.props.user),t.resetFields(),a.setState({visible:!1})}))})},a.saveFormRef=function(e){a.formRef=e},a.state={visible:!1,loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.currentUser()}},{key:"render",value:function(){return n.a.createElement(J,{className:"header"},n.a.createElement("div",{className:"logo"}),this.props.user&&n.a.createElement("div",{style:{float:"right"}},n.a.createElement(M.a,{style:{backgroundColor:this.props.color,verticalAlign:"middle"},size:"large"},this.props.user.name)),!this.props.user&&n.a.createElement("div",null,n.a.createElement(N.a,{type:"flex",justify:"end"},n.a.createElement(F.a,{span:2},n.a.createElement(q.a,{onClick:this.showModal},"Login")),n.a.createElement(F.a,{span:2},n.a.createElement(q.a,{type:"primary"},n.a.createElement(B.a,{to:"/register"}," Register ")))),n.a.createElement(K,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,loading:this.state.loading,onCancel:this.handleCancel,onCreate:this.handleSubmit})))}}]),t}(r.Component),X=Object(i.b)(function(e){var t=e.users.user,a=["#f56a00","#7265e6","#ffbf00","#00a2ae"];return{user:t,color:t?a[t._id%4]:a[0],loading:e.users.loading,error:e.users.loading}},{login:z,currentUser:V})($),Z=A.a.SubMenu,ee=D.a.Content,te=D.a.Sider,ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).onMenuClick=function(e){a.props.history.push("/"+e.key)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(D.a,null,n.a.createElement(X,null),n.a.createElement(D.a,null,n.a.createElement(te,{breakpoint:"lg",collapsedWidth:"0",width:200,style:{background:"#fff"}},n.a.createElement(A.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["items"],style:{height:"100%",borderRight:0},onClick:this.onMenuClick},n.a.createElement(Z,{key:"items",title:n.a.createElement("span",null,n.a.createElement(U.a,{type:"user"}),"Buy")},n.a.createElement(A.a.Item,{key:"items"},"All items"),n.a.createElement(A.a.Item,{key:"request_item"},"Add new item")),n.a.createElement(Z,{key:"manage",title:n.a.createElement("span",null,n.a.createElement(U.a,{type:"user"}),"Manage")},n.a.createElement(A.a.Item,{key:"profile"},n.a.createElement(U.a,{type:"user"}),"Profile"),n.a.createElement(A.a.Item,{key:"orders"},"My orders")))),n.a.createElement(D.a,{style:{padding:"0 24px 24px"}},n.a.createElement(ee,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},this.props.children))))}}]),t}(r.Component),re=Object(b.a)(ae),ne=(a(89),function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).onLogoutClick=function(){window.sessionStorage.userInfo=null,a.props.logout(),a.props.history.push("/")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log(this.props.user);var e=this.props.user;return n.a.createElement("div",{className:"App"},e&&n.a.createElement("div",null,n.a.createElement(h.a,{size:"large",header:n.a.createElement("div",null,"Your profile"),bordered:!0},n.a.createElement(h.a.Item,null,"Name: ",e.name),n.a.createElement(h.a.Item,null,"Email: ",e.email),n.a.createElement(h.a.Item,null,"Introduce: ",e.introduce),n.a.createElement(h.a.Item,null,n.a.createElement(q.a,{type:"Danger",onClick:this.onLogoutClick}," Log out ")))),!e&&n.a.createElement("div",null,"You must login to review user profile"))}}]),t}(r.Component)),le=Object(i.b)(function(e){return{user:e.users.user}},{logout:Y})(Object(b.a)(ne)),se=G.a.Item,ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){a.setState({visible:!1}),a.props.history.push("/")},a.handleCancel=function(e){a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){console.log(t),e||a.props.register(t,function(){console.log("register successfully, please log in"),a.handleReset(),a.showModal()})})},a.compareToFirstPassword=function(e,t,r){var n=a.props.form;t&&t!==n.getFieldValue("password")?r("Two passwords that you enter is inconsistent!"):r()},a.validateToNextPassword=function(e,t,r){var n=a.props.form;t&&n.validateFields(["confirm"],{force:!0}),r()},a.state={visible:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement("div",{className:"App",id:"login-page"},n.a.createElement("header",{className:"App-header"},n.a.createElement(G.a,{onSubmit:this.handleSubmit,className:"login-form"},n.a.createElement(se,null,e("name",{rules:[{required:!0,message:"Please input your user name!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User name"}))),n.a.createElement(se,null,e("email",{rules:[{required:!0,message:"Please input your Email!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),n.a.createElement(se,null,e("password",{rules:[{required:!0,message:"Please input your Password!"},{validator:this.validateToNextPassword}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),n.a.createElement(se,null,e("confirm_password",{rules:[{required:!0,message:"Please input your Password!"},{validator:this.compareToFirstPassword}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm Password"}))),n.a.createElement(se,null,n.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register"))),n.a.createElement(L.a,{title:"Success",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.a.createElement("p",null," You successfully regisered as a user. Happy hacking the site. "))))}}]),t}(r.Component),oe=G.a.create()(ie),ce=Object(i.b)(function(e){return{user:e.users.user,loading:e.users.loading,error:e.users.loading}},{register:function(e,t,a){return function(r){r(_("REGISTER_STARTED")),O.a.post("".concat(W,"/register"),e).then(function(e){r(j("REGISTER_SUCCESS",e.data)),t&&t()}).catch(function(e){r(R("REGISTER_FAILURE",e.message)),a&&a()})}}})(oe),ue=(a(389),a(195)),me=a(66),de=a.n(me),pe=a(113),Ee=a.n(pe),fe=(a(578),function(e){function t(e){return Object(o.a)(this,t),console.log(e),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user_id;this.props.findUser(e)}},{key:"render",value:function(){var e=this.props.itemCreatedBy;return e?(console.log(this.props.itemCreatedBy),n.a.createElement("div",null,n.a.createElement(M.a,{className:"auth-logo",size:"small",icon:"user"}),e.name," - ",e.introduce)):n.a.createElement("div",null)}}]),t}(r.Component)),he=Object(i.b)(function(e){return{itemCreatedBy:e.users.itemCreatedBy}},{findUser:function(e,t){return function(a){a(_("FIND_USER_STARTED")),O.a.get("".concat(W,"/findUser?_id=").concat(e)).then(function(e){a(j("FIND_USER_SUCCESS",e.data)),t&&t()}).catch(function(e){a(R("FIND_USER_FAILURE",e.message))})}}})(fe),ge=S("orders"),be=function(e,t,a){return function(r){r(_("GET_USER_ORDERS_STARTED")),O.a.get("".concat(ge,"/findUserOrders?user_id=").concat(e)).then(function(e){console.log(e.data.data),r(j("GET_USER_ORDERS_SUCCESS",e.data)),t&&t()}).catch(function(e){r(R("GET_USER_ORDERS_FAILURE",e.message)),a&&a()})}},ye=G.a.Item,ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(e){a.setState({visible:!0,message:e})},a.handleOk=function(e){a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(e){e.preventDefault();var t=a.props,r=t.current_user,n=t.display_item;a.props.form.validateFields(function(e,t){if(!e){if(a.props.current_user)t.user_id=r._id;else if(t.user_id="5af584ebb62aae2fa8e406a2",!t.email&&!t.wechat)return void a.showModal("You have not logged in. In order to make an order, you have to login or input email/wechat.");t.item_id=n._id,a.props.order(t,function(){a.handleReset(),a.showModal("You made an order successfully. Our staff will contact you shortly.")})}})},a.state={visible:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){de.a.setOptions({renderer:new de.a.Renderer,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1,highlight:function(e){return Ee.a.highlightAuto(e).value}});var e=this.props.match.params._id;this.props.getItem(e),this.props.currentUser()}},{key:"render",value:function(){var e=this.props.display_item,t=this.props.form.getFieldDecorator;return e?n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"title",style:{margin:"20px 0 0",textAlign:"center",fontSize:"34px",fontWeight:"bold"}}," ",e.name," ")),n.a.createElement(he,{user_id:e.created_by}),n.a.createElement("div",{id:"content",className:"article-detail",dangerouslySetInnerHTML:{__html:e.content?de()(e.content):null}}),n.a.createElement(G.a,{onSubmit:this.handleSubmit,className:"order-form"},n.a.createElement(ye,null,t("email",{rules:[{message:"Please input your Email!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email(Optional)"}))),n.a.createElement(ye,null,t("wechat",{rules:[{message:"Please input your Wechat!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Wechat(Optional)"}))),n.a.createElement(ye,null,t("quantity",{rules:[{required:!0,message:"Select quantity"}]})(n.a.createElement(ue.a,{min:1,placeholder:"Quantity"}))),n.a.createElement(ye,null,n.a.createElement(q.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Order"))),n.a.createElement(L.a,{title:"Success",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.a.createElement("p",null," ",this.state.message," "))):n.a.createElement("div",null,"Loading items")}}]),t}(r.Component),Oe=G.a.create()(ve),Se=Object(i.b)(function(e){return{current_user:e.users.user,display_item:e.items.displayItem,message:e.items.message,loading:e.items.loading,error:e.items.error}},{getItem:function(e){return function(t){t(_("GET_ITEM_STARTED")),O.a.get("".concat(C,"/find?_id=").concat(e)).then(function(e){t(j("GET_ITEM_SUCCESS",e.data))}).catch(function(e){t(R("GET_ITEM_FAILURE",e.message))})}},order:function(e,t,a){return function(r){r(_("ORDER_STARTED")),O.a.post("".concat(ge,"/add"),e).then(function(e){r(j("ORDER_SUCCESS",e.data)),t&&t()}).catch(function(e){r(R("ORDER_FAILURE",e.message)),a&&a()})}},currentUser:V})(Oe),_e=S("requests"),je=G.a.Item,Re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.props.current_user;t?a.props.form.validateFields(function(e,r){e||(r.user_id=t._id,a.props.request(r,function(){a.showModal("successfully request a new item, our staff will pick up this request soon."),a.handleReset()}))}):a.showModal("You have to login to make a request!")},a.showModal=function(e){a.setState({visible:!0,message:e})},a.handleOk=function(e){a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.state={visible:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement("div",{className:"App"},n.a.createElement(G.a,{onSubmit:this.handleSubmit},n.a.createElement(je,null,e("description",{rules:[{required:!0,message:"Please input some description!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Description"}))),n.a.createElement(je,null,e("reference",{rules:[{required:!0,message:"Please input your reference"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Website or seller site"}))),n.a.createElement(je,null,n.a.createElement(q.a,{type:"primary",htmlType:"submit"},"Request"))),n.a.createElement(L.a,{title:"From the page: ",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.a.createElement("p",null," ",this.state.message," ")))}}]),t}(r.Component),Ce=G.a.create()(Re),ke=Object(i.b)(function(e){return{current_user:e.users.user}},{request:function(e,t,a){return function(r){r(_("REQUEST_STARTED")),O.a.post("".concat(_e,"/add"),e).then(function(e){r(j("REQUEST_SUCCESS",e.data)),t&&t()}).catch(function(e){r(R("REQUEST_FAILURE",e.message)),a&&a()})}}})(Ce),Ie=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserOrders(this.props.user_id)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(h.a,{itemLayout:"horizontal",header:n.a.createElement("div",null,"Your orders"),size:"large",dataSource:this.props.user_orders,renderItem:function(e){return n.a.createElement(h.a.Item,null,n.a.createElement(h.a.Item.Meta,{avatar:n.a.createElement(M.a,{src:e.item_id.image_url}),title:e.item_id.name}),n.a.createElement("div",null,n.a.createElement("p",null," Item Name: ",e.item_id.name),n.a.createElement("p",null," Date: ",e.createdAt),n.a.createElement("p",null," Quantity: ",e.quantity),n.a.createElement("p",null," Status: ",e.status)))}}))}}]),t}(r.Component),we=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},this.props.current_user&&n.a.createElement(Ue,{user_id:this.props.current_user._id}),!this.props.current_user&&n.a.createElement("div",null," You must login to view orders! "))}}]),t}(r.Component),Te=function(e){return{current_user:e.users.user,user_orders:e.orders.user_orders}},Ue=Object(i.b)(Te,{getUserOrders:be})(Ie),De=Object(i.b)(Te,{currentUser:V,getUserOrders:be})(Object(b.a)(we)),Ae=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},this.props.user&&n.a.createElement("div",null),!this.props.user&&n.a.createElement("header",{className:"App-header"},"You must login to review user profile"))}}]),t}(r.Component),Ne=Object(i.b)(function(e){return{user:e.users.user}},{logout:Y})(Object(b.a)(Ae)),Fe=G.a.Item,Me=D.a.Header,Le=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=e.onCreate,l=e.form,s=e.loading,i=l.getFieldDecorator;return n.a.createElement(L.a,{visible:t,title:"Login",footer:[n.a.createElement(q.a,{key:"back",onClick:a},"Cancel"),n.a.createElement(q.a,{key:"submit",type:"primary",loading:s,onClick:r}," Submit ")]},n.a.createElement(G.a,{onSubmit:this.handleSubmit,className:"login-form"},n.a.createElement(Fe,null,i("email",{rules:[{required:!0,message:"Please input your Email!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),n.a.createElement(Fe,null,i("password",{rules:[{required:!0,message:"Please input your Password!"}]})(n.a.createElement(P.a,{prefix:n.a.createElement(U.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),n.a.createElement(Fe,null,i("remember",{valuePropName:"checked",initialValue:!0})(n.a.createElement(x.a,{className:"login-form-register-remember"},"Remember me")),n.a.createElement("a",{className:"login-form-forgot"},"Forgot password"))))}}]),t}(r.Component),xe=G.a.create()(Le),Pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleCancel=function(e){a.setState({visible:!1})},a.handleSubmit=function(e){var t=a.formRef.props.form;t.validateFields(function(e,r){e||(console.log("Received values of form: ",r),a.setState({loading:!0}),console.log(a.props.login),a.props.login(r,function(){window.sessionStorage.userInfo=JSON.stringify(a.props.user),t.resetFields(),a.setState({visible:!1})}))})},a.saveFormRef=function(e){a.formRef=e},a.state={visible:!1,loading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.currentUser()}},{key:"render",value:function(){return n.a.createElement(Me,{className:"header"},n.a.createElement("div",{className:"logo"}),this.props.user&&n.a.createElement("div",{style:{float:"right"}},n.a.createElement(q.a,null," ",n.a.createElement(B.a,{to:"/"}," Go to user site ")," "),n.a.createElement(M.a,{style:{backgroundColor:this.props.color,verticalAlign:"middle"},size:"large"},this.props.user.name)),!this.props.user&&n.a.createElement("div",null,n.a.createElement(N.a,{type:"flex",justify:"end"},n.a.createElement(F.a,{span:2},n.a.createElement(q.a,{onClick:this.showModal},"Login")),n.a.createElement(F.a,{span:2},n.a.createElement(q.a,{type:"primary"},n.a.createElement(B.a,{to:"/login"}," Register ")))),n.a.createElement(xe,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,loading:this.state.loading,onCancel:this.handleCancel,onCreate:this.handleSubmit})))}}]),t}(r.Component),qe=Object(i.b)(function(e){var t=e.users.user,a=["#f56a00","#7265e6","#ffbf00","#00a2ae"];return{user:t,color:t?a[t._id%4]:a[0],loading:e.users.loading,error:e.users.loading}},{login:z,currentUser:V})(Pe),Ge=A.a.SubMenu,Be=D.a.Content,We=D.a.Sider,ze=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).onMenuClick=function(e){a.props.history.push("/broker_site/"+e.key)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(D.a,null,n.a.createElement(qe,null),n.a.createElement(D.a,null,n.a.createElement(We,{breakpoint:"lg",collapsedWidth:"0",width:200,style:{background:"#fff"}},n.a.createElement(A.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["broker"],style:{height:"100%",borderRight:0},onClick:this.onMenuClick},n.a.createElement(Ge,{key:"broker",title:n.a.createElement("span",null,n.a.createElement(U.a,{type:"laptop"}),"Pick up requests")},n.a.createElement(A.a.Item,{key:"item_edit"},"Edit Item")))),n.a.createElement(D.a,{style:{padding:"0 24px 24px"}},n.a.createElement(Be,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},this.props.children))))}}]),t}(r.Component),Ye=Object(b.a)(ze),Ve=a(192),He=a.n(Ve),Je=G.a.Item,Qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getSmdeValue=function(){return a.state.smde.value()},a.setSmdeValue=function(e){a.state.smde.value(e)},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.handleReset=function(){a.props.form.resetFields()},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){t.content=a.getSmdeValue(),t.created_by=a.props.user._id,console.log(t),e||a.props.addItem(t,function(){a.handleReset(),a.setSmdeValue(""),a.showModal()})})},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("editor")&&this.setState({smde:new He.a({element:document.getElementById("editor").childElementCount,autofocus:!0,autosave:!0,previewRender:function(e){return de()(e,{renderer:new de.a.Renderer,gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!0,smartLists:!0,smartypants:!0,highlight:function(e){return Ee.a.highlightAuto(e).value}})}})}),this.props.currentUser()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:16}}},a=this.props.user;return a&&1===a.user_type?n.a.createElement("div",null,n.a.createElement(G.a,{onSubmit:this.handleSubmit},n.a.createElement(Je,Object.assign({},t,{label:"Name"}),e("name",{rules:[{required:!0,message:"Please input item name!"}]})(n.a.createElement(P.a,null))),n.a.createElement(Je,Object.assign({},t,{label:"Description"}),e("description")(n.a.createElement(P.a,null))),n.a.createElement(Je,Object.assign({},t,{label:"Cover Image"}),e("image_url",{rules:[{required:!0,message:"Please input item image url!"}]})(n.a.createElement(P.a,null))),n.a.createElement(Je,Object.assign({},t,{label:"Price"}),e("price",{rules:[{required:!0,message:"Please input item price!"}]})(n.a.createElement(P.a,null))),n.a.createElement(Je,Object.assign({},t,{label:"Content"}),n.a.createElement("textarea",{id:"editor",style:{marginBottom:20,width:800},size:"large",rows:6})),n.a.createElement(Je,null,n.a.createElement(q.a,{type:"primary",htmlType:"submit"},"Save"))),n.a.createElement(L.a,{title:"Basic Modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.a.createElement("p",null,"Add new item successfully"))):n.a.createElement("div",null,"You need to be an admin to access this page")}}]),t}(r.Component),Ke=G.a.create()(Qe),$e=Object(i.b)(function(e){return{user:e.users.user}},{addItem:function(e,t){return function(a){a(_("ADD_NEW_ITEM_STARTED")),O.a.post("".concat(C,"/add"),e).then(function(e){a(j("ADD_NEW_ITEM_SUCCESS",e.data)),t()}).catch(function(e){a(R("ADD_NEW_ITEM_FAILURE",e.message))})}},currentUser:V})(Ke),Xe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(p.a,null,n.a.createElement(E.a,null,n.a.createElement(f.a,{exact:!0,path:"/",render:function(e){return n.a.createElement(re,null,n.a.createElement(T,null))}}),n.a.createElement(f.a,{path:"/register",component:ce}),n.a.createElement(f.a,{path:"/items",render:function(e){return n.a.createElement(re,null,n.a.createElement(T,null))}}),n.a.createElement(f.a,{path:"/request_item",render:function(e){return n.a.createElement(re,null,n.a.createElement(ke,null))}}),n.a.createElement(f.a,{path:"/profile",render:function(e){return n.a.createElement(re,null,n.a.createElement(le,null))}}),n.a.createElement(f.a,{path:"/item/:_id",render:function(e){return n.a.createElement(re,null,n.a.createElement(Se,e))}}),n.a.createElement(f.a,{path:"/orders",render:function(e){return n.a.createElement(re,null,n.a.createElement(De,null))}}),n.a.createElement(f.a,{path:"/requests",render:function(e){return n.a.createElement(re,null,n.a.createElement(Ne,null))}}),n.a.createElement(f.a,{path:"/broker_site/item_edit",render:function(e){return n.a.createElement(Ye,null,n.a.createElement($e,e))}})))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=a(83),et=a(193),tt=a(194),at=Object(Ze.c)({default:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&arguments[1];return e},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_ITEMS_STARTED":return Object(y.a)({},e,{loading:!0});case"LIST_ITEMS_SUCCESS":return Object(y.a)({},e,{loading:!1,items:t.payload.data,message:t.payload.message});case"LIST_ITEMS_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});case"GET_ITEM_STARTED":return Object(y.a)({},e,{loading:!0});case"GET_ITEM_SUCCESS":return Object(y.a)({},e,{loading:!1,displayItem:t.payload.data,message:t.payload.message});case"GET_ITEM_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_STARTED":return Object(y.a)({},e,{loading:!0});case"LOGIN_SUCCESS":var a=t.payload.data,r={name:a.name,avatar:a.avatar,email:a.email,_id:a._id,introduce:a.introduce};return Object(y.a)({},e,{loading:!1,user:r,error:void 0});case"LOGIST_ITEMS_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});case"REGISTER_SUCCESS":return Object(y.a)({},e,{register_succes:!0,error:void 0});case"REGISTER_FAILURE":return Object(y.a)({},e,{register_succes:!1,error:t.payload.error});case"FIND_USER_SUCCESS":return Object(y.a)({},e,{loading:!1,itemCreatedBy:t.payload.data,error:void 0});case"FIND_USER_FAILURE":return Object(y.a)({},e,{loading:!1,itemCreatedBy:"anonymous",error:t.payload.error});case"LOGOUT":return Object(y.a)({},e,{user:void 0});case"CURRENT_USER":return Object(y.a)({},e,{user:t.payload.user});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_STARTED":return Object(y.a)({},e,{loading:!0});case"ORDER_SUCCESS":return Object(y.a)({},e,{loading:!1,order:t.payload.data,message:t.payload.message});case"ORDER_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});case"GET_USER_ORDERS_STARTED":return Object(y.a)({},e,{loading:!0});case"GET_USER_ORDERS_SUCCESS":return Object(y.a)({},e,{loading:!1,user_orders:t.payload.data,message:t.payload.message});case"GET_USER_ORDERS_FAILURE":return Object(y.a)({},e,{loading:!1,error:t.payload.error});default:return e}}}),rt=Object(tt.createLogger)(),nt=Object(Ze.d)(at,Object(Ze.a)(et.a,rt));s.a.render(n.a.createElement(i.a,{store:nt},n.a.createElement(Xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,a){}},[[197,2,1]]]);
//# sourceMappingURL=main.d57dcb97.chunk.js.map